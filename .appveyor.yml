version: '{build}'

environment:
  - MSYSTEM: UCRT64
  - CHERE_INVOKING: yes
  - MSYS2_BASH: C:\msys64\usr\bin\bash

# Disable automatic builds
build: off

# Build artifacts: all wheel and exe files in the dist folder
artifacts:
  - path: 'dist\*.whl'
  - path: 'dist\*.exe'

install:
- ps: |
    %MSYS2_BASH% -lc "pacman --noconfirm -Syuu"
    %MSYS2_BASH% -lc "pacman --noconfirm -Syuu"
    %MSYS2_BASH% scripts/msys2-install-deps

build_script:
- ps: |
    %MSYS2_BASH% scripts/msys2-build
